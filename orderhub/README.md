
# ğŸ“¦ Order Hub

A modular, event-driven **Spring Boot** microservices architecture that simulates stock order processing using **REST APIs**, **AWS SNS/SQS**, and **LocalStack** for local development and testing.

## ğŸ“ Project Structure

```

orderhub/
â”œâ”€â”€ commons/                     # Shared library (DTOs, utility classes)
â”‚   â””â”€â”€ shared-lib/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ order-api/               # REST API to place stock orders (publishes to SNS)
â”‚   â””â”€â”€ notification-service/    # SQS consumer that listens for order events
â”œâ”€â”€ scripts/                     # Dev helper scripts (LocalStack, JWT, etc.)
â”œâ”€â”€ docker-compose.yml           # LocalStack setup
â”œâ”€â”€ Makefile                     # One-liner dev commands
â””â”€â”€ settings.gradle

````

## ğŸš€ Features

- ğŸ”„ **Order API (REST)** â€“ Accepts HTTP `POST` requests and publishes order events to AWS SNS.
- ğŸ“¬ **Notification Service** â€“ Subscribes to SNS via SQS and processes incoming order messages.
- ğŸ’» **LocalStack Support** â€“ Emulates AWS services for local dev and testing.
- ğŸ”§ **Shared Module** â€“ Common DTOs and utils across services.
- ğŸ§ª **Testable Design** â€“ Unit and integration test support via JUnit 5 and Mockito.
- ğŸ”’ **Spring Boot 3.x**, **Java 17**, **Gradle**

## ğŸ› ï¸ Tech Stack

| Layer        | Technology               |
|--------------|---------------------------|
| Language     | Java 17                  |
| Framework    | Spring Boot 3.x          |
| API Layer    | REST (Spring Web)        |
| Messaging    | AWS SNS + SQS (LocalStack) |
| Build Tool   | Gradle                   |
| Containers   | Docker + Docker Compose  |


## ğŸš§ Setup Instructions

### 1ï¸âƒ£ Prerequisites

- Java 17
- Docker
- `make` (optional, for dev automation)


### 2ï¸âƒ£ Clone and Build

```bash
git clone https://github.com/your-org/stock-order-system.git
cd stock-order-system
./gradlew clean build
````

---

### 3ï¸âƒ£ Start LocalStack Infrastructure

```bash
make infra.up        # or docker-compose up -d
make init.sqs        # initializes SNS topics and SQS queues
```

---

### 4ï¸âƒ£ Run Services Locally

```bash
make run.order-api         # REST API to place orders
make run.notification      # Worker that listens to SQS
```

---

## ğŸ§ª Test the Order Flow

### â• Place an Order (REST API)

```bash
curl -X POST http://localhost:8080/api/orders \
  -H 'Content-Type: application/json' \
  -d '{
    "userId": "user-123",
    "symbol": "AAPL",
    "quantity": 100,
    "type": "BUY"
  }'
```

### ğŸ”„ Expected Flow:

1. `order-api` receives the REST request.
2. Publishes message to SNS (`order-topic`).
3. SNS fan-outs to SQS (`notification-queue`).
4. `notification-service` picks up and logs/handles the order.

---

## ğŸ“œ Developer Scripts

```bash
scripts/
â”œâ”€â”€ aws_localstack_utils.sh   # Purge SQS, receive messages, etc.
â”œâ”€â”€ jwt_utils.sh              # Inspect JWT tokens (if auth is added)
â”œâ”€â”€ design.sh                 # Scaffolding helpers for services/modules
```

---

## ğŸ§ª Run All Tests

```bash
./gradlew test
```

---

## ğŸ“Œ TODOs

* ğŸ—ƒï¸ Add database persistence (e.g., PostgreSQL or DynamoDB)
* ğŸ” Add JWT authentication & authorization
* ğŸ“ˆ Add metrics via Micrometer + Prometheus
* ğŸ” Add retry and DLQ handling for SQS consumers
* ğŸ” Add OpenAPI/Swagger for API documentation

---

## ğŸ¤ Contributing

1. Fork this repo
2. Create a feature branch
3. Submit a PR with a detailed description

---

## ğŸªª License

MIT Â© 2025 \[Your Name or Organization]

```

Let me know if you want:
- Swagger/OpenAPI docs autogenerated
- Mermaid system diagram to add to the README
- CI/CD badges or GitHub Actions workflow setup
- Terraform script to provision real AWS infra

Ready to extend this? Let's scaffold `order-api` and `notification-service` controllers next if you'd like!
```
